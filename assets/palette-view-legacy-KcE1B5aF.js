System.register(["./chakra-legacy-S6iHddlO.js","./index-legacy-q40kyNlY.js","./react-legacy-KN5lAqTZ.js","./pantone-input-legacy-i42OSSU8.js","./ag-grid-react-legacy-M7IuPEtm.js","./use-palette-legacy-FHBrt5KV.js","./line-detail-card-legacy-rY4HdtUo.js","./ag-grid-community-legacy-4nDRcaTd.js"],(function(e,t){"use strict";var a,n,l,i,s,r,o,c,d,u,p,g,m,h,f,x,j,y,v,C,w,b,D,R,A,L,k,S,E,I,T,z;return{setters:[e=>{a=e.an,n=e.L,l=e.H,i=e.B,s=e.aq,r=e.K,o=e.ar,c=e.D,d=e.F},e=>{u=e.u,p=e.s,g=e.R,m=e.r,h=e.E,f=e.a,x=e.M,j=e.b,y=e.c,v=e.d,C=e.e,w=e.f,b=e.g,D=e.h},e=>{R=e.l,A=e.u,L=e.o,k=e.r},e=>{S=e.u,E=e.R},e=>{I=e.m},e=>{T=e.u},e=>{z=e.L},null],execute:function(){e("default",(function(){const{isDataLoading:e}=u((e=>e.app));return l.jsxs(b,{children:[e&&l.jsx(D,{isIndeterminate:!0}),l.jsx(H,{}),l.jsxs(d,{flex:1,overflow:"hidden",position:"relative",children:[l.jsx(N,{}),l.jsx(O,{})]})]})}));var t=function(e){var t=e.children,s=a().colorMode,r=n("RmgAgGrid");return l.jsx(i,{className:"light"===s?"ag-theme-alpine":"ag-theme-alpine-dark",sx:r,children:t})};function H(){const{t:e,i18n:t}=R(),a=S(),n=A(),i=L(),{countryList:o,selectedCountry:c}=u((e=>e.app)),d=o.map((e=>[e.id,a(e.name)])).sort(((e,a)=>e[1].localeCompare(a[1],t.languages[0]))).reduce(((e,t)=>"UN"===t[0]?e:{...e,[t[0]]:t[1]}),{"":e("Please select...")}),f=[{type:"select",label:e("Country/Region"),value:c,options:d,disabledOptions:[""],onChange:e=>n(p(e))}];return l.jsxs(g,{children:[l.jsx(E,{fields:f}),l.jsx(s,{ml:"auto",children:l.jsx(r,{variant:"solid",size:"sm",colorScheme:"primary",onClick:()=>{m.isStandaloneWindow()?i("/new"):m.openApp("rmg-palette-upload"),m.event(h.ADD_CITY,{})},children:e("Add a city")})})]})}function M(e){const{city:t}=e,a=T(t),n=S();return l.jsx(s,{flexWrap:"wrap",sx:{"& .chakra-badge":{mb:1}},children:a.map((e=>l.jsx(f,{name:n(e.name),fg:e.fg||x.white,bg:e.colour},e.id)))})}function N(){const{t:e,i18n:a}=R(),n=S(),i=j();L();const{cityList:s,selectedCountry:r,sidePanelCity:o}=u((e=>e.app)),c=s.filter((e=>e.country===r)),d=k.useRef(null);k.useEffect((()=>{var e;o||null===(e=d.current)||void 0===e||null===(e=e.api)||void 0===e||e.deselectAll()}),[o]);const p=k.useCallback((({api:e})=>{const t=e.getSelectedRows().map((e=>e.id));1===t.length?i(y(t[0])):i(v())}),[]),g=k.useMemo((()=>[{headerName:e("City"),field:"name",valueFormatter:({value:e})=>n(e),comparator:(e,t)=>n(e).localeCompare(n(t),a.languages[0]),sortable:!0,sort:"asc",wrapText:!0,filter:!0},{headerName:e("Lines"),field:"id",cellRenderer:({value:e})=>l.jsx(M,{city:e}),flex:1,autoHeight:!0,resizable:!1}]),[a.language]),m=k.useMemo((()=>({resizable:!0})),[]);return l.jsx(t,{children:l.jsx(I.AgGridReact,{ref:d,rowData:c,columnDefs:g,defaultColDef:m,getRowId:({data:e})=>e.id,headerHeight:36,rowHeight:36,suppressCellFocus:!0,suppressRowVirtualisation:!0,rowSelection:"single",debug:!1,onSelectionChanged:p})})}const F=410;function O(){var e,t;const{t:a}=R(),n=A(),{sidePanelCity:i,cityList:d}=u((e=>e.app)),p=T(i),g=S()(null!==(e=null===(t=d.find((e=>e.id===i)))||void 0===t?void 0:t.name)&&void 0!==e?e:{});return l.jsxs(C,{isOpen:!!i,width:F,header:"Dummy header",children:[l.jsx(w,{onClose:()=>{n(v())},children:g}),l.jsx(o,{spacing:.5,px:2,flex:1,overflowY:"auto",children:p.map((e=>{var t;const a={...e,nameEntity:Object.entries(e.name),fg:null!==(t=e.fg)&&void 0!==t?t:x.white};return l.jsx(z,{lineDetail:a,editable:!1},e.id)}))}),l.jsx(c,{}),l.jsx(s,{p:1,children:l.jsx(r,{size:"sm",ml:"auto",onClick:async()=>{m.closeApp("rmg-palette-upload"),setTimeout((()=>{m.openApp("rmg-palette-upload","/rmg-palette/#/new?city="+i)}),200),m.event(h.EDIT_CITY,{city:i})},children:a("Edit")})})]})}}}}));
