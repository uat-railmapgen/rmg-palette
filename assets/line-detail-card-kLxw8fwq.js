import{H as e,aq as w,ac as m,B as F,F as M}from"./chakra-oz4Mm5GU.js";import{u as O,M as b,W as k,X as f,L as E}from"./index-DWcuudcV.js";import{l as v,r as y}from"./react-CVMQYbqF.js";import{P,R as C,u as R,M as S,e as L,f as W,g as N,h as U,d as I}from"./pantone-input-YOiCqH3F.js";function G(r){var s;const{lineDetail:n,onUpdate:l}=r,{t:a}=v(),{pantoneReady:c}=O(t=>t.app),[i,h]=y.useState(!!n.pantone),g=[{label:a("Yes"),value:!0},{label:a("No"),value:!1}],p=[{label:a("Black"),value:b.black},{label:a("White"),value:b.white}],u=[{type:"input",label:a("Line code"),placeholder:"e.g. twl, gz1, sh1",value:n.id,onChange:t=>l({id:t}),validator:t=>t!==""&&!t.match(/[^a-z0-9]/)},{type:"input",label:a("Background colour"),variant:i?"text":"color",value:n.colour,onChange:t=>l({colour:t}),isDisabled:c&&i},{type:"custom",label:a("Use Pantone®"),component:e.jsx(k,{selections:g,defaultValue:i,onChange:t=>h(t)}),hidden:!c},{type:"custom",label:a("Pantone® code"),component:e.jsx(P,{value:(s=n.pantone)!=null?s:"",onChange:(t,o)=>l({pantone:t,colour:o})}),hidden:!c||!i},{type:"custom",label:a("Foreground colour"),component:e.jsx(k,{selections:p,defaultValue:n.fg,onChange:t=>l({fg:t})})}];return e.jsx(C,{fields:u})}const H={"& > div:first-of-type":{flex:1}},D=r=>{var u;const{onUpdate:n,onLangSwitch:l,onRemove:a}=r,c=(u=r.entries)!=null?u:[],{t:i}=v(),h=R(),g=(s,t)=>[{type:"select",label:i("Language"),value:s,options:Object.entries(E).reduce((o,x)=>({...o,[x[0]]:h(x[1])}),{}),disabledOptions:c.filter(o=>o[0]!==s).map(o=>o[0]),onChange:o=>l(s,o)},{type:"input",label:i("Name"),value:t,onChange:o=>n(s,o),validator:o=>!!o}],p=()=>{const s=Object.keys(E).filter(t=>!c.find(o=>o[0]===t))[0];n(s,"")};return e.jsx(e.Fragment,{children:c.map(([s,t],o,x)=>e.jsxs(w,{sx:H,"data-testid":"entry-card-stack-"+s,children:[e.jsx(C,{fields:g(s,t),noLabel:o>0}),o===x.length-1?e.jsx(m,{size:"sm",variant:"ghost","aria-label":i("Add a name in another language"),title:i("Add a name in another language"),onClick:p,icon:e.jsx(S,{})}):e.jsx(F,{minW:8}),x.length>1&&e.jsx(m,{size:"sm",variant:"ghost","aria-label":i("Remove this name"),title:i("Remove this name"),onClick:()=>a(s),icon:e.jsx(L,{})})]},o))})};function Y(r){return e.jsx(f,{direction:"column",children:e.jsx(D,{...r})})}function K(r){const{lineDetail:n}=r,{t:l}=v(),a=[{type:"output",label:l("Line code"),value:n.id},{type:"output",label:l("Background colour"),value:n.colour},{type:"output",label:l("Pantone® code"),value:n.pantone,hidden:!n.pantone},{type:"output",label:l("Foreground colour"),value:n.fg===b.black?l("Black"):l("White")}];return e.jsx(C,{fields:a})}function _(r){const{lineDetail:n,editable:l,onUpdate:a,onMoveUp:c,onMoveDown:i,onCopy:h,onRemove:g,onNameUpdate:p,onLangSwitch:u,onNameRemove:s}=r,{t}=v(),o=R(),[x,z]=y.useState(!1),A=y.useMemo(()=>({bg:n.colour,m:-1,w:"calc(100% + var(--chakra-space-1) * 2)",px:2,"&, button":{color:n.fg},"& > div:first-of-type":{overflow:"hidden",textWrap:"nowrap",textOverflow:"ellipsis"},"& > div:nth-of-type(2)":{ml:"auto"}}),[n.colour,n.fg]),B=o(Object.fromEntries(n.nameEntity));return e.jsxs(f,{direction:"column",sx:{pb:0},children:[e.jsxs(f,{sx:A,children:[e.jsx("div",{children:B}),l&&e.jsxs(w,{spacing:.5,children:[e.jsx(m,{size:"xs",variant:"ghost","aria-label":t("Move up"),title:t("Move up"),icon:e.jsx(W,{}),onClick:c}),e.jsx(m,{size:"xs",variant:"ghost","aria-label":t("Move down"),title:t("Move down"),icon:e.jsx(N,{}),onClick:i}),e.jsx(m,{size:"xs",variant:"ghost","aria-label":t("Edit"),title:t("Edit"),icon:e.jsx(U,{}),onClick:()=>z(d=>!d)}),e.jsx(m,{size:"xs",variant:"ghost","aria-label":t("Duplicate"),title:t("Duplicate"),icon:e.jsx(I,{}),onClick:h}),e.jsx(m,{size:"xs",variant:"ghost","aria-label":t("Remove"),title:t("Remove"),icon:e.jsx(L,{}),onClick:g})]})]}),x&&e.jsxs(M,{direction:"column",position:"relative",my:1,children:[e.jsx(G,{lineDetail:n,onUpdate:d=>a==null?void 0:a(d)}),e.jsx(D,{entries:n.nameEntity,onUpdate:(d,j)=>p==null?void 0:p(d,j),onLangSwitch:(d,j)=>u==null?void 0:u(d,j),onRemove:d=>s==null?void 0:s(d)})]}),!l&&e.jsx(M,{direction:"column",my:1,children:e.jsx(K,{lineDetail:n})})]})}export{_ as L,Y as M};
